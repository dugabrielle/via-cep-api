<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estilo.css">
    <title>API ViaCEP</title>
</head>

<body>
    <div class="campo">
        <label>Consulte o CEP: </label>
        <input type="number" id="cep">
        <button onclick="buscarCep()">Buscar</button>
        <button id="apagar" onclick="limparDados()">Apagar</button>
    </div>
    <div id="resultado">
    </div>
    <script>

        function buscarCep() {
            let cep = document.querySelector("#cep").value;

            if (cep.length !== 8) {
                alert("CEP Inválido!");
            }

            fetch(`https://viacep.com.br/ws/${cep}/json/`).then(response => response.json())
                .then(data => {
                    console.log(data)
                    mostrarDados(data);
                })

                .catch(errado => {
                    console.log("Algo deu errado!");
                })
        }

        const limparDados = () => {
            const apagar = document.querySelector("#apagar");
            apagar.addEventListener("click", () =>{
                const resultado = document.querySelector("#resultado")
                resultado.innerHTML = '';
            })
        }

        function mostrarDados(dados) {
            let resultado = document.querySelector("#resultado");
            if (dados.erro) {
                resultado.innerHTML = "Não foi possível localizar o endereço!";
            } else {
                resultado.innerHTML = `
            <p>Endereço: ${dados.logradouro}</p>
            <p>Bairro: ${dados.bairro}</p>
            <p>Cidade: ${dados.localidade} - ${dados.uf}</p>
            `
            }
        }
    </script>
</body>

</html>